<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    
    <style>

        h1 {
            font-size: 5rem;
        }

        div {
            position: relative;
            top : 300px
        }

    </style>


</head>
<body>

    <div>
        <h1>HELLO</h1>
    
        <input id ="fade-in-btn" type="button" value="fade in">

    </div>



    <script>

        const fadeInBtn = document.querySelector('#fade-in-btn')
        const h1Elem = document.querySelector('h1')

        fadeInBtn.addEventListener('click', ()=>{
            
            
            let opacityRange = [1, 0];
            
            let count = 0;
            let opacity = opacityRange[0];
            const totalTime = 1500;
            const cycleTime = 30;           
            const callCount = Math.floor( totalTime / cycleTime );
            const opacityOffset = (opacityRange[1] - opacityRange[0]) / callCount ;
                console.log('callCount:', callCount)    
            const tid1 =
            setInterval(() => {
                count++;

                console.log('count:', count)

                opacity = opacity + opacityOffset;
                console.log('opacity', opacity)
                h1Elem.style.opacity = opacity
            
                if(count === callCount)
                {
                    clearInterval(tid1)
                }
            

            }, cycleTime);

            // 위와 같이 하면 totalTime 보다 적은 시간 동안 돌아가게됨.
            // 어차피 시간 딱 맞추는 건 중요하지 않다.
            // 중요한 건 call 횟수만 알면 로직상으로는 문제가 없음.

            // 위 코드는 문제가 있으니 좀 생각해보자.


            //★ setInterval을 쓸 때 가장 중요한 것은 
            // 1. call 횟수의 설정과 if(call 횟수 === true) 이면 clearInterval 해주는 것이다.
            // 2. 총 타임 시간 / intervalTime  = 값이 절대 소수점으로 나오게 해서는 안 된다는 점이다.

            // setInterval은 이게 끝이다. 복잡하게 생각할 필요가 없다.

            // 그러면 로직이 복잡해질 뿐더러 오류의 가능성이 커진다.
            // 아무런 이득도 없는데 왜 그렇게 할 필요가 있겠냐.
        
        

        });


        


    </script>




</body>
</html>